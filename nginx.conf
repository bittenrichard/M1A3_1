# Configuração do servidor Nginx
server {
  # O servidor vai escutar na porta 80, que é a porta padrão para HTTP.
  listen 80;

  # Define o diretório raiz onde os arquivos do site estão localizados.
  # Este caminho corresponde ao destino do comando COPY no Dockerfile.
  root /usr/share/nginx/html;

  # Define o arquivo padrão a ser servido quando uma pasta é solicitada.
  index index.html;

  # Bloco de localização para a raiz (/) e todas as outras rotas.
  location / {
    # DOCUMENTAÇÃO: Esta é a linha mais importante para SPAs (React, Vue, Angular).
    # Ela instrui o Nginx a tentar servir o arquivo exato que o navegador pediu.
    # Se não encontrar (por exemplo, /dashboard), em vez de dar um erro 404,
    # ele serve o 'index.html'. Isso entrega o controle do roteamento para
    # o React Router no frontend, permitindo que a navegação funcione corretamente.
    try_files $uri /index.html;
  }

  # Configurações para cache de arquivos estáticos.
  # Diz aos navegadores para guardarem esses arquivos por mais tempo,
  # melhorando a performance do site em visitas futuras.
  location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, no-transform";
  }
}